<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="../css/theme-default-easytable.css"/>
    <link rel="stylesheet" href="../css/my.css"/>
    <script src="../js/config.js"></script>
    <script src="../js/Sortable.js"></script>
    <script src="../js/vue.min.js"></script>
    <script src="../js/axios.min.js"></script>
</head>
<body>
<div id="app" style="font-size: 12px;">
    <div class="ve-table">
        <li class="ve-table-container ve-table-border-around" id="vDiv" style="max-height: 900px; ">
            <table class="ve-table-content ve-table-border-x ve-table-border-y" id="vTable">
                <thead class="ve-table-fixed-header ve-table-header">
                <tr class="ve-table-header-tr">
                    <th class="ve-table-header-th" style="width: 160px;" v-for="col in tableData[0]">
                        <div class="td-flex">
                            <span class="center" style="width: 100%;">{{col.partnerName}}</span>
                        </div>
                        <div class="td-flex">
                            <span class="center" style="width: 100%;">{{col.netBuyAmount}}</span>
                        </div>
                    </th>
                </tr>
                </thead>
                <tbody id="sort" class="ve-table-body ve-table-stripe ve-table-row-hover ve-table-row-highlight">
                <tr>
                    <td class="ve-table-body-td" style="vertical-align: top;" v-for="(col, index) in tableData" v-if="index > 0">
                        <ul style="width: 100%;display: block;border-bottom: 5px solid #fff;padding-bottom: 2px;" v-for="c in col" :class="'s'+c.code" @mouseenter="isHover('s'+c.code)" @mouseleave="isLeave('s'+c.code)">
                            <li>
                                <span class="left" style="width: 70%; font-size: 15px;">{{c.name}}</span>
                                <span class="right" style="width: 30%;" :style="c.changeRate.startsWith('-') ? 'color: green' : 'color: red'">{{c.changeRate}}</span>
                            </li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>
    </div>
</div>
</div>
<!--弹出层时背景层DIV-->
<div id="fade" class="black_overlay" onclick="CloseDiv()"></div>
<div id="MyDiv" class="white_content" style="overflow-x:hidden; overflow-y:hidden;"></div>
</body>

<script>
    var fcode = "all";
    var h = location.href;
    console.log(fcode);
    if (h.indexOf("?") > 0) {
        fcode = h.substr(h.indexOf("?") + 1);
        console.log(fcode);
    }
    var fade = document.getElementById('fade');
    var MyDiv = document.getElementById('MyDiv');
    //关闭弹出层
    fade.onclick = function () {
        MyDiv.style.display = 'none';
        fade.style.display = 'none';
    };

    // 异步请求函数必须要写在外面，然后在vue里面调用
    function asyncLoadDate() {
        axios.get(url + 'dragon/partner/2026-02-13').then(function (response) {
            if (response.status === 200) {
                vm.fillData(response);
            }
        }).catch(function (error) {
            alert("系统异常");
        });
    }

    var vm = new Vue({
        el: "#app",
        mounted: function () {
            asyncLoadDate();
        },
        methods: {
            fillData: function (response) {
                let json = response.data;
                this.tableData = json.data;
                // console.log(JSON.stringify(this.tableData))
            },
            isHover: function (code) {
                document.getElementById('vTable').querySelectorAll('.' + code).forEach(function (el) {
                    el.style.backgroundColor = 'yellow';
                });
            },
            isLeave: function (code) {
                document.getElementById('vTable').querySelectorAll('.' + code).forEach(function (el) {
                    el.style.backgroundColor = ''; // 或者设置回默认颜色或其他颜色
                });
            },
            //弹出隐藏层
            getJsonValue: function (json) {
                console.log(json)
            },
            showFundDetail: function (code) {
                if (fcode == "all") {
                    MyDiv.style.left = '20%';
                } else {
                    MyDiv.style.left = '13%';
                    MyDiv.style.top = '0';
                }
                MyDiv.style.width = '1150px';
                MyDiv.style.height = '680px';
                MyDiv.style.display = 'block';
                fade.style.display = 'block';
                MyDiv.innerHTML = '<object type="text/html" data="fundDetail.html?' + code + '" width="100%" height="99%"></object>';
            },
            showReportStock: function (code) {
                if (fcode == "all") {
                    MyDiv.style.left = '20%';
                } else {
                    MyDiv.style.left = '13%';
                    MyDiv.style.top = '0';
                }
                MyDiv.style.width = '1150px';
                MyDiv.style.height = '680px';
                MyDiv.style.display = 'block';
                fade.style.display = 'block';
                MyDiv.innerHTML = '<object type="text/html" data="reportStock.html?' + code +
                    '" width="100%" height="100%"></object>';

            },
        },
        data: function () {
            return {
                isDragging: true,
                dates: [],
                tableData: []
            };
        },
    });
</script>

</html>
